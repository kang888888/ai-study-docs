// æ‰¹é‡ä¿®å¤è®­ç»ƒå’Œæ¨ç†ç›¸å…³èŠ‚ç‚¹çš„ç¼ºå¤±æ¨¡å—
import fs from 'fs';
import path from 'path';
import { fileURLToPath } from 'url';

const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

const knowledgeDir = path.join(__dirname, '../src/data/knowledge');

// éœ€è¦ä¿®å¤çš„æ–‡ä»¶å’Œç¼ºå¤±çš„æ¨¡å—
const fixes = [
  // è®­ç»ƒç›¸å…³ - éœ€è¦æ·»åŠ å®Œæ•´çš„4ä¸ªæ¨¡å—
  { 
    file: 'ZeROä¼˜åŒ–å™¨.json', 
    addCoreConcept: true, 
    addCoreFeatures: true, 
    addKeyTech: true, 
    addAppScene: true 
  },
  { 
    file: 'æ¢¯åº¦ç´¯ç§¯ä¸æ£€æŸ¥ç‚¹.json', 
    addCoreConcept: true, 
    addCoreFeatures: true, 
    addKeyTech: true, 
    addAppScene: true 
  },
  { 
    file: 'æ··åˆç²¾åº¦è®­ç»ƒ.json', 
    addCoreConcept: true, 
    addCoreFeatures: true, 
    addKeyTech: true, 
    addAppScene: true 
  },
  { 
    file: 'é€šä¿¡ä¼˜åŒ–.json', 
    addCoreConcept: true, 
    addCoreFeatures: true, 
    addKeyTech: true, 
    addAppScene: true 
  },
  { 
    file: 'å…¬å¼€æ•°æ®é›†.json', 
    addCoreConcept: true, 
    addCoreFeatures: true, 
    addKeyTech: true, 
    addAppScene: true 
  },
  { 
    file: 'æ•°æ®æŠ“å–.json', 
    addCoreConcept: true, 
    addCoreFeatures: true, 
    addKeyTech: true, 
    addAppScene: true 
  },
  { 
    file: 'äººå·¥æ ‡æ³¨.json', 
    addCoreConcept: true, 
    addCoreFeatures: true, 
    addKeyTech: true, 
    addAppScene: true 
  },
  // æ¨ç†ç›¸å…³
  { 
    file: 'KV Cache.json', 
    addCoreConcept: true, 
    addCoreFeatures: true, 
    addKeyTech: true, 
    addAppScene: true 
  },
  { 
    file: 'PagedAttention.json', 
    addCoreConcept: true, 
    addCoreFeatures: true, 
    addKeyTech: true, 
    addAppScene: true 
  },
  { 
    file: 'FlashAttention.json', 
    addCoreConcept: true, 
    addCoreFeatures: true, 
    addKeyTech: true, 
    addAppScene: true 
  },
  { 
    file: 'Speculative Decoding.json', 
    addCoreConcept: true, 
    addCoreFeatures: true, 
    addKeyTech: true, 
    addAppScene: true 
  },
  { 
    file: 'TensorRT-LLM.json', 
    addCoreConcept: true, 
    addCoreFeatures: true, 
    addKeyTech: true, 
    addAppScene: true 
  },
  { 
    file: 'vLLM.json', 
    addCoreConcept: true, 
    addCoreFeatures: true, 
    addKeyTech: true, 
    addAppScene: true 
  },
  { 
    file: 'è§£ç ç­–ç•¥.json', 
    addCoreConcept: true, 
    addCoreFeatures: true, 
    addKeyTech: true, 
    addAppScene: true 
  },
  { 
    file: 'æç¤ºå·¥ç¨‹.json', 
    addCoreConcept: true, 
    addCoreFeatures: true, 
    addKeyTech: true, 
    addAppScene: true 
  },
  { 
    file: 'æµå¼ç”Ÿæˆ.json', 
    addCoreConcept: true, 
    addCoreFeatures: true, 
    addKeyTech: true, 
    addAppScene: true 
  },
  { 
    file: 'RAGç³»ç»Ÿ.json', 
    addCoreConcept: true, 
    addCoreFeatures: true, 
    addKeyTech: true, 
    addAppScene: true 
  },
  { 
    file: 'AIæ™ºèƒ½ä½“.json', 
    addCoreConcept: true, 
    addCoreFeatures: true, 
    addKeyTech: true, 
    addAppScene: true 
  },
  { 
    file: 'LangChainæ¡†æ¶.json', 
    addCoreConcept: true, 
    addCoreFeatures: true, 
    addKeyTech: true, 
    addAppScene: true 
  },
];

// è·å–å†…å®¹æ¨¡æ¿
const getContent = (fileName, type) => {
  const name = fileName.replace('.json', '');
  
  // æ ¸å¿ƒæ¦‚å¿µ
  if (type === 'coreConcept') {
    const concepts = {
      'ZeROä¼˜åŒ–å™¨': 'ZeROï¼ˆZero Redundancy Optimizerï¼‰æ˜¯DeepSpeedæå‡ºçš„å†…å­˜ä¼˜åŒ–æŠ€æœ¯ï¼Œé€šè¿‡å°†ä¼˜åŒ–å™¨çŠ¶æ€ã€æ¢¯åº¦å’Œå‚æ•°åˆ†ç‰‡åˆ°å¤šä¸ªGPUä¸Šï¼Œæœ€å¤§ç¨‹åº¦å‡å°‘å†…å­˜å ç”¨ï¼Œä½¿å¾—å¯ä»¥åœ¨æœ‰é™çš„GPUå†…å­˜ä¸Šè®­ç»ƒè¶…å¤§è§„æ¨¡æ¨¡å‹ã€‚',
      'æ¢¯åº¦ç´¯ç§¯ä¸æ£€æŸ¥ç‚¹': 'æ¢¯åº¦ç´¯ç§¯é€šè¿‡å¤šæ¬¡å‰å‘ä¼ æ’­ç´¯ç§¯æ¢¯åº¦åå†æ›´æ–°å‚æ•°ï¼Œå…è®¸ä½¿ç”¨æ›´å¤§çš„æœ‰æ•ˆæ‰¹æ¬¡å¤§å°ï¼›æ£€æŸ¥ç‚¹æŠ€æœ¯é€šè¿‡åœ¨å‰å‘ä¼ æ’­æ—¶ä¸¢å¼ƒä¸­é—´æ¿€æ´»å€¼ï¼Œåœ¨åå‘ä¼ æ’­æ—¶é‡æ–°è®¡ç®—ï¼Œå¤§å¹…å‡å°‘å†…å­˜å ç”¨ã€‚',
      'æ··åˆç²¾åº¦è®­ç»ƒ': 'æ··åˆç²¾åº¦è®­ç»ƒä½¿ç”¨FP16/BF16è¿›è¡Œå‰å‘å’Œåå‘ä¼ æ’­ä»¥åŠ é€Ÿè®¡ç®—ï¼ŒåŒæ—¶ä½¿ç”¨FP32ä¿å­˜ä¸»æƒé‡å’Œä¼˜åŒ–å™¨çŠ¶æ€ä»¥ä¿è¯è®­ç»ƒç¨³å®šæ€§ï¼Œæ˜¯è®­ç»ƒå¤§æ¨¡å‹çš„æ ‡å‡†æŠ€æœ¯ã€‚',
      'é€šä¿¡ä¼˜åŒ–': 'é€šä¿¡ä¼˜åŒ–é€šè¿‡æ¢¯åº¦å‹ç¼©ã€å¼‚æ­¥æ›´æ–°ã€é€šä¿¡ä¸è®¡ç®—é‡å ç­‰æŠ€æœ¯ï¼Œå‡å°‘åˆ†å¸ƒå¼è®­ç»ƒä¸­çš„é€šä¿¡å¼€é”€ï¼Œæé«˜è®­ç»ƒæ•ˆç‡ã€‚',
      'å…¬å¼€æ•°æ®é›†': 'å…¬å¼€æ•°æ®é›†æ˜¯ç”¨äºè®­ç»ƒå¤§æ¨¡å‹çš„å…¬å¼€å¯ç”¨çš„æ•°æ®é›†åˆï¼Œå¦‚CommonCrawlã€The Pileã€C4ç­‰ï¼Œæ˜¯æ„å»ºé¢„è®­ç»ƒæ•°æ®é›†çš„é‡è¦æ¥æºã€‚',
      'æ•°æ®æŠ“å–': 'æ•°æ®æŠ“å–æ˜¯ä»äº’è”ç½‘ã€æ•°æ®åº“ç­‰æ¥æºè‡ªåŠ¨æ”¶é›†å’Œæå–æ•°æ®çš„è¿‡ç¨‹ï¼Œæ˜¯å¤§æ¨¡å‹æ•°æ®æ”¶é›†çš„é‡è¦ç¯èŠ‚ã€‚',
      'äººå·¥æ ‡æ³¨': 'äººå·¥æ ‡æ³¨æ˜¯ç”±ä¸“ä¸šäººå‘˜å¯¹æ•°æ®è¿›è¡Œæ ‡æ³¨å’Œåˆ†ç±»çš„è¿‡ç¨‹ï¼Œç”¨äºåˆ›å»ºé«˜è´¨é‡çš„è®­ç»ƒæ•°æ®é›†ï¼Œç‰¹åˆ«æ˜¯ç›‘ç£å­¦ä¹ å’Œå¼ºåŒ–å­¦ä¹ ä»»åŠ¡ã€‚',
      'KV Cache': 'KV Cacheæ˜¯ç¼“å­˜Transformeræ¨¡å‹ä¸­çš„Keyå’ŒValueçŸ©é˜µçš„æŠ€æœ¯ï¼Œé¿å…é‡å¤è®¡ç®—ï¼Œæ˜¾è‘—åŠ é€Ÿè‡ªå›å½’ç”Ÿæˆè¿‡ç¨‹ã€‚',
      'PagedAttention': 'PagedAttentionæ˜¯vLLMæå‡ºçš„æ³¨æ„åŠ›æœºåˆ¶ä¼˜åŒ–æŠ€æœ¯ï¼Œé€šè¿‡åˆ†é¡µç®¡ç†KV Cacheï¼Œå®ç°é«˜æ•ˆçš„å†…å­˜ç®¡ç†å’Œå¹¶è¡Œé‡‡æ ·ã€‚',
      'FlashAttention': 'FlashAttentionæ˜¯ä¼˜åŒ–çš„æ³¨æ„åŠ›è®¡ç®—ç®—æ³•ï¼Œé€šè¿‡åˆ†å—è®¡ç®—å’Œåœ¨çº¿softmaxï¼Œåœ¨ä¿æŒæ•°å€¼ç²¾åº¦çš„åŒæ—¶å¤§å¹…å‡å°‘å†…å­˜å ç”¨å’Œè®¡ç®—æ—¶é—´ã€‚',
      'Speculative Decoding': 'æ¨æµ‹è§£ç ä½¿ç”¨è¾ƒå°çš„è‰ç¨¿æ¨¡å‹ç”Ÿæˆå€™é€‰åºåˆ—ï¼Œä¸»æ¨¡å‹å¹¶è¡ŒéªŒè¯ï¼Œé€šè¿‡å¹¶è¡Œè®¡ç®—åŠ é€Ÿç”Ÿæˆè¿‡ç¨‹ã€‚',
      'TensorRT-LLM': 'TensorRT-LLMæ˜¯NVIDIAæ¨å‡ºçš„é«˜æ€§èƒ½LLMæ¨ç†æ¡†æ¶ï¼Œé€šè¿‡å›¾ä¼˜åŒ–ã€å†…æ ¸èåˆã€é‡åŒ–ç­‰æŠ€æœ¯å®ç°æè‡´æ¨ç†æ€§èƒ½ã€‚',
      'vLLM': 'vLLMæ˜¯é«˜æ€§èƒ½LLMæ¨ç†å’ŒæœåŠ¡æ¡†æ¶ï¼Œé€šè¿‡PagedAttentionã€è¿ç»­æ‰¹å¤„ç†ç­‰æŠ€æœ¯å®ç°é«˜ååé‡å’Œä½å»¶è¿Ÿçš„æ¨ç†æœåŠ¡ã€‚',
      'è§£ç ç­–ç•¥': 'è§£ç ç­–ç•¥æ˜¯æ§åˆ¶è¯­è¨€æ¨¡å‹ç”Ÿæˆæ–‡æœ¬çš„æ–¹æ³•ï¼ŒåŒ…æ‹¬è´ªå¿ƒæœç´¢ã€æŸæœç´¢ã€é‡‡æ ·ç­‰ï¼Œå½±å“ç”Ÿæˆæ–‡æœ¬çš„è´¨é‡å’Œå¤šæ ·æ€§ã€‚',
      'æç¤ºå·¥ç¨‹': 'æç¤ºå·¥ç¨‹æ˜¯é€šè¿‡è®¾è®¡å’Œä¼˜åŒ–è¾“å…¥æç¤ºæ¥å¼•å¯¼æ¨¡å‹äº§ç”ŸæœŸæœ›è¾“å‡ºçš„æŠ€æœ¯ï¼Œæ˜¯æé«˜æ¨¡å‹æ€§èƒ½çš„é‡è¦æ‰‹æ®µã€‚',
      'æµå¼ç”Ÿæˆ': 'æµå¼ç”Ÿæˆæ˜¯é€æ­¥è¾“å‡ºç”Ÿæˆç»“æœçš„æŠ€æœ¯ï¼Œå…è®¸ç”¨æˆ·å®æ—¶çœ‹åˆ°ç”Ÿæˆå†…å®¹ï¼Œæå‡äº¤äº’ä½“éªŒã€‚',
      'RAGç³»ç»Ÿ': 'RAGï¼ˆRetrieval-Augmented Generationï¼‰ç³»ç»Ÿé€šè¿‡æ£€ç´¢ç›¸å…³æ–‡æ¡£å¹¶å¢å¼ºç”Ÿæˆè¿‡ç¨‹ï¼Œæé«˜æ¨¡å‹çš„å‡†ç¡®æ€§å’Œæ—¶æ•ˆæ€§ã€‚',
      'AIæ™ºèƒ½ä½“': 'AIæ™ºèƒ½ä½“æ˜¯èƒ½å¤Ÿæ„ŸçŸ¥ç¯å¢ƒã€åšå‡ºå†³ç­–å¹¶æ‰§è¡ŒåŠ¨ä½œçš„è‡ªä¸»ç³»ç»Ÿï¼Œç»“åˆå¤§è¯­è¨€æ¨¡å‹å®ç°å¤æ‚ä»»åŠ¡è‡ªåŠ¨åŒ–ã€‚',
      'LangChainæ¡†æ¶': 'LangChainæ˜¯ç”¨äºæ„å»ºLLMåº”ç”¨çš„æ¡†æ¶ï¼Œæä¾›é“¾å¼è°ƒç”¨ã€å·¥å…·é›†æˆã€è®°å¿†ç®¡ç†ç­‰èƒ½åŠ›ï¼Œç®€åŒ–åº”ç”¨å¼€å‘ã€‚',
    };
    return concepts[name] || '';
  }
  
  // æ ¸å¿ƒç‰¹ç‚¹
  if (type === 'coreFeatures') {
    const features = {
      'ZeROä¼˜åŒ–å™¨': [
        'å†…å­˜åˆ†ç‰‡ï¼šå°†ä¼˜åŒ–å™¨çŠ¶æ€ã€æ¢¯åº¦ã€å‚æ•°åˆ†ç‰‡åˆ°å¤šä¸ªGPU',
        'é›¶å†—ä½™ï¼šæ¯ä¸ªGPUåªå­˜å‚¨éƒ¨åˆ†çŠ¶æ€ï¼Œæ¶ˆé™¤å†—ä½™',
        'å¯æ‰©å±•æ€§ï¼šæ”¯æŒè®­ç»ƒè¶…å¤§è§„æ¨¡æ¨¡å‹ï¼ˆä¸‡äº¿å‚æ•°ï¼‰',
        'å¤šé˜¶æ®µä¼˜åŒ–ï¼šZeRO-1/2/3æä¾›ä¸åŒçº§åˆ«çš„å†…å­˜ä¼˜åŒ–',
        'å…¼å®¹æ€§å¥½ï¼šä¸ç°æœ‰è®­ç»ƒæ¡†æ¶æ— ç¼é›†æˆ'
      ],
      'æ¢¯åº¦ç´¯ç§¯ä¸æ£€æŸ¥ç‚¹': [
        'å†…å­˜ä¼˜åŒ–ï¼šæ£€æŸ¥ç‚¹æŠ€æœ¯å¯å‡å°‘50-80%çš„æ¿€æ´»å†…å­˜',
        'æ‰¹æ¬¡æ‰©å±•ï¼šæ¢¯åº¦ç´¯ç§¯å…è®¸ä½¿ç”¨æ›´å¤§çš„æœ‰æ•ˆæ‰¹æ¬¡å¤§å°',
        'è®¡ç®—æƒè¡¡ï¼šæ£€æŸ¥ç‚¹ä»¥è®¡ç®—æ—¶é—´æ¢å–å†…å­˜ç©ºé—´',
        'çµæ´»é…ç½®ï¼šå¯æ ¹æ®ç¡¬ä»¶èµ„æºè°ƒæ•´ç´¯ç§¯æ­¥æ•°å’Œæ£€æŸ¥ç‚¹é¢‘ç‡',
        'è®­ç»ƒç¨³å®šï¼šä¸å½±å“æœ€ç»ˆæ¨¡å‹æ€§èƒ½'
      ],
      'æ··åˆç²¾åº¦è®­ç»ƒ': [
        'åŠ é€Ÿè®­ç»ƒï¼šFP16/BF16è®¡ç®—é€Ÿåº¦æ˜¯FP32çš„2-4å€',
        'å†…å­˜èŠ‚çœï¼šFP16/BF16å†…å­˜å ç”¨æ˜¯FP32çš„ä¸€åŠ',
        'è®­ç»ƒç¨³å®šï¼šFP32ä¸»æƒé‡ä¿è¯æ•°å€¼ç²¾åº¦',
        'æ¢¯åº¦ç¼©æ”¾ï¼šè‡ªåŠ¨å¤„ç†æ¢¯åº¦ä¸‹æº¢é—®é¢˜',
        'å¹¿æ³›æ”¯æŒï¼šä¸»æµæ¡†æ¶åŸç”Ÿæ”¯æŒ'
      ],
      'é€šä¿¡ä¼˜åŒ–': [
        'æ¢¯åº¦å‹ç¼©ï¼šå‡å°‘é€šä¿¡æ•°æ®é‡',
        'å¼‚æ­¥æ›´æ–°ï¼šé€šä¿¡ä¸è®¡ç®—å¹¶è¡Œ',
        'é€šä¿¡é‡å ï¼šéšè—é€šä¿¡å»¶è¿Ÿ',
        'æ‹“æ‰‘ä¼˜åŒ–ï¼šä¼˜åŒ–é€šä¿¡æ‹“æ‰‘ç»“æ„',
        'æ€§èƒ½æå‡ï¼šæ˜¾è‘—æé«˜è®­ç»ƒååé‡'
      ],
      'å…¬å¼€æ•°æ®é›†': [
        'è§„æ¨¡åºå¤§ï¼šåŒ…å«æ•°TBåˆ°æ•°PBçš„æ•°æ®',
        'å¤šæ ·æ€§é«˜ï¼šæ¶µç›–å¤šä¸ªé¢†åŸŸå’Œè¯­è¨€',
        'è´¨é‡å‚å·®ï¼šéœ€è¦å¤§é‡æ¸…æ´—å’Œè¿‡æ»¤',
        'æŒç»­æ›´æ–°ï¼šå®šæœŸå‘å¸ƒæ–°ç‰ˆæœ¬',
        'å¼€æºå…è´¹ï¼šå¯è‡ªç”±ä½¿ç”¨å’Œåˆ†å‘'
      ],
      'æ•°æ®æŠ“å–': [
        'è‡ªåŠ¨åŒ–ï¼šå¯å¤§è§„æ¨¡è‡ªåŠ¨æ”¶é›†æ•°æ®',
        'å¤šæ ·æ€§ï¼šå¯ä»å¤šä¸ªæ¥æºè·å–æ•°æ®',
        'å®æ—¶æ€§ï¼šå¯è·å–æœ€æ–°æ•°æ®',
        'è´¨é‡æ§åˆ¶ï¼šéœ€è¦è¿‡æ»¤å’Œå»é‡',
        'åˆè§„æ€§ï¼šéœ€éµå®ˆæ³•å¾‹æ³•è§„'
      ],
      'äººå·¥æ ‡æ³¨': [
        'é«˜è´¨é‡ï¼šä¸“ä¸šæ ‡æ³¨ä¿è¯æ•°æ®è´¨é‡',
        'å‡†ç¡®æ€§é«˜ï¼šäººå·¥å®¡æ ¸å‡å°‘é”™è¯¯',
        'æˆæœ¬è¾ƒé«˜ï¼šéœ€è¦å¤§é‡äººåŠ›æŠ•å…¥',
        'ä¸€è‡´æ€§ï¼šéœ€è¦æ ‡æ³¨è§„èŒƒå’ŒåŸ¹è®­',
        'å¯æ‰©å±•æ€§ï¼šå¯é€šè¿‡ä¼—åŒ…ç­‰æ–¹å¼æ‰©å±•'
      ],
      'KV Cache': [
        'åŠ é€Ÿç”Ÿæˆï¼šé¿å…é‡å¤è®¡ç®—Keyå’ŒValue',
        'å†…å­˜å ç”¨ï¼šéœ€è¦å­˜å‚¨å†å²KVå€¼',
        'åºåˆ—é•¿åº¦é™åˆ¶ï¼šå—GPUå†…å­˜é™åˆ¶',
        'å¹¶è¡Œå‹å¥½ï¼šæ”¯æŒæ‰¹é‡ç”Ÿæˆ',
        'æ€§èƒ½æå‡ï¼šæ˜¾è‘—æé«˜ç”Ÿæˆé€Ÿåº¦'
      ],
      'PagedAttention': [
        'å†…å­˜é«˜æ•ˆï¼šåˆ†é¡µç®¡ç†å‡å°‘å†…å­˜ç¢ç‰‡',
        'å¹¶è¡Œé‡‡æ ·ï¼šæ”¯æŒå¤šä¸ªåºåˆ—å¹¶è¡Œç”Ÿæˆ',
        'åŠ¨æ€åˆ†é…ï¼šæŒ‰éœ€åˆ†é…å†…å­˜é¡µé¢',
        'é›¶æ‹·è´ï¼šé¿å…ä¸å¿…è¦çš„æ•°æ®å¤åˆ¶',
        'é«˜ååé‡ï¼šæ˜¾è‘—æé«˜æœåŠ¡ååé‡'
      ],
      'FlashAttention': [
        'å†…å­˜ä¼˜åŒ–ï¼šåˆ†å—è®¡ç®—å‡å°‘å†…å­˜å ç”¨',
        'æ•°å€¼ç¨³å®šï¼šåœ¨çº¿softmaxä¿è¯ç²¾åº¦',
        'è®¡ç®—é«˜æ•ˆï¼šå‡å°‘å†…å­˜è®¿é—®æ¬¡æ•°',
        'é•¿åºåˆ—æ”¯æŒï¼šå¯å¤„ç†æ›´é•¿åºåˆ—',
        'æ€§èƒ½æå‡ï¼šè®­ç»ƒå’Œæ¨ç†é€Ÿåº¦æå‡2-4å€'
      ],
      'Speculative Decoding': [
        'å¹¶è¡ŒåŠ é€Ÿï¼šè‰ç¨¿æ¨¡å‹å’Œä¸»æ¨¡å‹å¹¶è¡Œ',
        'è´¨é‡ä¿è¯ï¼šä¸»æ¨¡å‹éªŒè¯ä¿è¯è¾“å‡ºè´¨é‡',
        'ååæå‡ï¼šå¯æå‡2-3å€ç”Ÿæˆé€Ÿåº¦',
        'èµ„æºéœ€æ±‚ï¼šéœ€è¦é¢å¤–çš„è‰ç¨¿æ¨¡å‹',
        'é€‚ç”¨åœºæ™¯ï¼šé€‚åˆæ‰¹é‡ç”Ÿæˆä»»åŠ¡'
      ],
      'TensorRT-LLM': [
        'æè‡´æ€§èƒ½ï¼šNVIDIAç¡¬ä»¶ä¼˜åŒ–',
        'å›¾ä¼˜åŒ–ï¼šè‡ªåŠ¨ä¼˜åŒ–è®¡ç®—å›¾',
        'å†…æ ¸èåˆï¼šå‡å°‘å†…æ ¸å¯åŠ¨å¼€é”€',
        'é‡åŒ–æ”¯æŒï¼šINT8/INT4é‡åŒ–',
        'ç”Ÿäº§å°±ç»ªï¼šå·¥ä¸šçº§æ¨ç†æ¡†æ¶'
      ],
      'vLLM': [
        'é«˜ååé‡ï¼šPagedAttentionå®ç°é«˜æ•ˆæœåŠ¡',
        'è¿ç»­æ‰¹å¤„ç†ï¼šåŠ¨æ€æ‰¹å¤„ç†æé«˜åˆ©ç”¨ç‡',
        'ä½å»¶è¿Ÿï¼šä¼˜åŒ–çš„å†…å­˜ç®¡ç†',
        'æ˜“äºéƒ¨ç½²ï¼šç®€å•çš„APIæ¥å£',
        'å¼€æºå…è´¹ï¼šç¤¾åŒºæ´»è·ƒ'
      ],
      'è§£ç ç­–ç•¥': [
        'å¤šæ ·æ€§æ§åˆ¶ï¼šå¹³è¡¡ç”Ÿæˆè´¨é‡å’Œå¤šæ ·æ€§',
        'å‚æ•°å¯è°ƒï¼šæ¸©åº¦ã€top-kã€top-pç­‰å‚æ•°',
        'ä»»åŠ¡ç›¸å…³ï¼šä¸åŒä»»åŠ¡é€‚åˆä¸åŒç­–ç•¥',
        'è®¡ç®—å¼€é”€ï¼šä¸åŒç­–ç•¥è®¡ç®—æˆæœ¬ä¸åŒ',
        'æ•ˆæœå½±å“ï¼šç›´æ¥å½±å“ç”Ÿæˆæ–‡æœ¬è´¨é‡'
      ],
      'æç¤ºå·¥ç¨‹': [
        'æ€§èƒ½æå‡ï¼šæ˜¾è‘—æé«˜æ¨¡å‹è¡¨ç°',
        'ä»»åŠ¡é€‚é…ï¼šé’ˆå¯¹ä¸åŒä»»åŠ¡è®¾è®¡æç¤º',
        'å°‘æ ·æœ¬å­¦ä¹ ï¼šFew-shotæç¤ºå‡å°‘è®­ç»ƒéœ€æ±‚',
        'å¯è§£é‡Šæ€§ï¼šæç¤ºå½±å“æ¨¡å‹æ¨ç†è¿‡ç¨‹',
        'æŒç»­ä¼˜åŒ–ï¼šéœ€è¦ä¸æ–­è¿­ä»£æ”¹è¿›'
      ],
      'æµå¼ç”Ÿæˆ': [
        'å®æ—¶åé¦ˆï¼šç”¨æˆ·å®æ—¶çœ‹åˆ°ç”Ÿæˆå†…å®¹',
        'ä½“éªŒä¼˜åŒ–ï¼šæå‡äº¤äº’ä½“éªŒ',
        'èµ„æºé«˜æ•ˆï¼šé€æ­¥ç”Ÿæˆå‡å°‘ç­‰å¾…æ—¶é—´',
        'ä¸­æ–­æ”¯æŒï¼šå¯éšæ—¶ä¸­æ–­ç”Ÿæˆ',
        'å¹¿æ³›åº”ç”¨ï¼šèŠå¤©ã€ä»£ç ç”Ÿæˆç­‰åœºæ™¯'
      ],
      'RAGç³»ç»Ÿ': [
        'çŸ¥è¯†å¢å¼ºï¼šæ£€ç´¢å¤–éƒ¨çŸ¥è¯†å¢å¼ºç”Ÿæˆ',
        'æ—¶æ•ˆæ€§ï¼šå¯è·å–æœ€æ–°ä¿¡æ¯',
        'å‡†ç¡®æ€§ï¼šåŸºäºçœŸå®æ–‡æ¡£ç”Ÿæˆ',
        'å¯è¿½æº¯ï¼šå¯è¿½æº¯ä¿¡æ¯æ¥æº',
        'å¹¿æ³›åº”ç”¨ï¼šé—®ç­”ã€æ–‡æ¡£ç”Ÿæˆç­‰åœºæ™¯'
      ],
      'AIæ™ºèƒ½ä½“': [
        'è‡ªä¸»å†³ç­–ï¼šèƒ½å¤Ÿç‹¬ç«‹åšå‡ºå†³ç­–',
        'å·¥å…·ä½¿ç”¨ï¼šå¯è°ƒç”¨å¤–éƒ¨å·¥å…·å’ŒAPI',
        'ä»»åŠ¡è§„åˆ’ï¼šèƒ½å¤Ÿåˆ†è§£å’Œæ‰§è¡Œå¤æ‚ä»»åŠ¡',
        'æŒç»­å­¦ä¹ ï¼šå¯ä»äº¤äº’ä¸­å­¦ä¹ ',
        'å¹¿æ³›åº”ç”¨ï¼šè‡ªåŠ¨åŒ–ã€åŠ©æ‰‹ç­‰åœºæ™¯'
      ],
      'LangChainæ¡†æ¶': [
        'é“¾å¼è°ƒç”¨ï¼šæ”¯æŒå¤æ‚çš„è°ƒç”¨é“¾',
        'å·¥å…·é›†æˆï¼šè½»æ¾é›†æˆå¤–éƒ¨å·¥å…·',
        'è®°å¿†ç®¡ç†ï¼šæ”¯æŒå¯¹è¯è®°å¿†',
        'æ¨¡å—åŒ–è®¾è®¡ï¼šç»„ä»¶å¯å¤ç”¨',
        'ç”Ÿæ€ä¸°å¯Œï¼šå¤§é‡æ’ä»¶å’Œå·¥å…·'
      ],
    };
    return features[name] || [];
  }
  
  // å…³é”®æŠ€æœ¯
  if (type === 'keyTech') {
    const techs = {
      'ZeROä¼˜åŒ–å™¨': 'ä¼˜åŒ–å™¨çŠ¶æ€åˆ†ç‰‡ã€æ¢¯åº¦åˆ†ç‰‡ã€å‚æ•°åˆ†ç‰‡ã€CPUå¸è½½ã€ZeRO-Infinityã€DeepSpeedé›†æˆ',
      'æ¢¯åº¦ç´¯ç§¯ä¸æ£€æŸ¥ç‚¹': 'æ¢¯åº¦ç´¯ç§¯ã€æ¿€æ´»æ£€æŸ¥ç‚¹ã€æ¢¯åº¦æ£€æŸ¥ç‚¹ã€å†…å­˜ä¼˜åŒ–ã€æ‰¹æ¬¡æ‰©å±•',
      'æ··åˆç²¾åº¦è®­ç»ƒ': 'FP16/BF16è®¡ç®—ã€FP32ä¸»æƒé‡ã€æ¢¯åº¦ç¼©æ”¾ã€è‡ªåŠ¨æ··åˆç²¾åº¦ã€æ•°å€¼ç¨³å®šæ€§',
      'é€šä¿¡ä¼˜åŒ–': 'æ¢¯åº¦å‹ç¼©ã€ç¨€ç–é€šä¿¡ã€å¼‚æ­¥AllReduceã€é€šä¿¡é‡å ã€æ‹“æ‰‘ä¼˜åŒ–',
      'å…¬å¼€æ•°æ®é›†': 'æ•°æ®æ”¶é›†ã€æ•°æ®æ¸…æ´—ã€æ•°æ®è¿‡æ»¤ã€æ•°æ®å»é‡ã€è´¨é‡è¯„ä¼°',
      'æ•°æ®æŠ“å–': 'ç½‘é¡µæŠ“å–ã€APIè°ƒç”¨ã€æ•°æ®åº“æŸ¥è¯¢ã€å¢é‡æ›´æ–°ã€å»é‡è¿‡æ»¤',
      'äººå·¥æ ‡æ³¨': 'æ ‡æ³¨è§„èŒƒã€è´¨é‡æ§åˆ¶ã€ä¸€è‡´æ€§æ£€æŸ¥ã€ä¼—åŒ…æ ‡æ³¨ã€æ ‡æ³¨å·¥å…·',
      'KV Cache': 'ç¼“å­˜æœºåˆ¶ã€å†…å­˜ç®¡ç†ã€åºåˆ—ç¼“å­˜ã€æ‰¹é‡ç”Ÿæˆã€ç¼“å­˜ä¼˜åŒ–',
      'PagedAttention': 'åˆ†é¡µç®¡ç†ã€å†…å­˜åˆ†é…ã€å¹¶è¡Œé‡‡æ ·ã€é›¶æ‹·è´ã€åŠ¨æ€æ‰¹å¤„ç†',
      'FlashAttention': 'åˆ†å—è®¡ç®—ã€åœ¨çº¿softmaxã€å†…å­˜ä¼˜åŒ–ã€è®¡ç®—ä¼˜åŒ–ã€é•¿åºåˆ—æ”¯æŒ',
      'Speculative Decoding': 'è‰ç¨¿æ¨¡å‹ã€å¹¶è¡ŒéªŒè¯ã€æ¥å—/æ‹’ç»æœºåˆ¶ã€ååä¼˜åŒ–',
      'TensorRT-LLM': 'å›¾ä¼˜åŒ–ã€å†…æ ¸èåˆã€é‡åŒ–ã€åŠ¨æ€å½¢çŠ¶ã€æ‰¹å¤„ç†ä¼˜åŒ–',
      'vLLM': 'PagedAttentionã€è¿ç»­æ‰¹å¤„ç†ã€å†…å­˜ç®¡ç†ã€è°ƒåº¦ä¼˜åŒ–ã€æœåŠ¡æ¡†æ¶',
      'è§£ç ç­–ç•¥': 'è´ªå¿ƒæœç´¢ã€æŸæœç´¢ã€é‡‡æ ·ã€æ¸©åº¦ç¼©æ”¾ã€top-k/top-pé‡‡æ ·',
      'æç¤ºå·¥ç¨‹': 'Few-shotæç¤ºã€æ€ç»´é“¾ã€è§’è‰²è®¾å®šã€ä»»åŠ¡åˆ†è§£ã€æç¤ºä¼˜åŒ–',
      'æµå¼ç”Ÿæˆ': 'å¢é‡ç”Ÿæˆã€æµå¼ä¼ è¾“ã€ä¸­æ–­å¤„ç†ã€çŠ¶æ€ç®¡ç†',
      'RAGç³»ç»Ÿ': 'æ–‡æ¡£æ£€ç´¢ã€å‘é‡æœç´¢ã€ä¸Šä¸‹æ–‡å¢å¼ºã€ç”Ÿæˆèåˆã€æ£€ç´¢ä¼˜åŒ–',
      'AIæ™ºèƒ½ä½“': 'ä»»åŠ¡è§„åˆ’ã€å·¥å…·è°ƒç”¨ã€çŠ¶æ€ç®¡ç†ã€å†³ç­–æœºåˆ¶ã€å­¦ä¹ èƒ½åŠ›',
      'LangChainæ¡†æ¶': 'é“¾å¼è°ƒç”¨ã€å·¥å…·é›†æˆã€è®°å¿†ç®¡ç†ã€æç¤ºæ¨¡æ¿ã€è¾“å‡ºè§£æ',
    };
    return techs[name] || '';
  }
  
  // åº”ç”¨åœºæ™¯
  if (type === 'appScene') {
    const scenes = {
      'ZeROä¼˜åŒ–å™¨': 'å¤§è§„æ¨¡æ¨¡å‹è®­ç»ƒã€å¤šGPUè®­ç»ƒã€å†…å­˜å—é™ç¯å¢ƒã€DeepSpeedè®­ç»ƒã€è¶…å¤§è§„æ¨¡æ¨¡å‹é¢„è®­ç»ƒ',
      'æ¢¯åº¦ç´¯ç§¯ä¸æ£€æŸ¥ç‚¹': 'å¤§æ¨¡å‹è®­ç»ƒã€å†…å­˜ä¼˜åŒ–ã€æ‰¹æ¬¡æ‰©å±•ã€é•¿åºåˆ—è®­ç»ƒã€èµ„æºå—é™ç¯å¢ƒ',
      'æ··åˆç²¾åº¦è®­ç»ƒ': 'å¤§æ¨¡å‹è®­ç»ƒã€åŠ é€Ÿè®­ç»ƒã€å†…å­˜ä¼˜åŒ–ã€ç”Ÿäº§è®­ç»ƒã€ä¸»æµè®­ç»ƒæ¡†æ¶',
      'é€šä¿¡ä¼˜åŒ–': 'åˆ†å¸ƒå¼è®­ç»ƒã€å¤šèŠ‚ç‚¹è®­ç»ƒã€é€šä¿¡ç“¶é¢ˆä¼˜åŒ–ã€å¤§è§„æ¨¡è®­ç»ƒã€é«˜æ€§èƒ½è®­ç»ƒ',
      'å…¬å¼€æ•°æ®é›†': 'é¢„è®­ç»ƒæ•°æ®æ”¶é›†ã€æ¨¡å‹é¢„è®­ç»ƒã€æ•°æ®å¢å¼ºã€ç ”ç©¶æ•°æ®é›†ã€åŸºå‡†æµ‹è¯•',
      'æ•°æ®æŠ“å–': 'è®­ç»ƒæ•°æ®æ”¶é›†ã€å®æ—¶æ•°æ®è·å–ã€æ•°æ®æ›´æ–°ã€å¤§è§„æ¨¡æ•°æ®æ”¶é›†ã€æ•°æ®æºæ•´åˆ',
      'äººå·¥æ ‡æ³¨': 'ç›‘ç£å­¦ä¹ ã€å¼ºåŒ–å­¦ä¹ ã€æ•°æ®è´¨é‡æå‡ã€ä»»åŠ¡ç‰¹å®šæ•°æ®ã€é«˜è´¨é‡æ•°æ®é›†',
      'KV Cache': 'è‡ªå›å½’ç”Ÿæˆã€æ–‡æœ¬ç”Ÿæˆã€å¯¹è¯ç³»ç»Ÿã€æ‰¹é‡æ¨ç†ã€é•¿æ–‡æœ¬ç”Ÿæˆ',
      'PagedAttention': 'LLMæ¨ç†æœåŠ¡ã€æ‰¹é‡ç”Ÿæˆã€å¹¶è¡Œé‡‡æ ·ã€é«˜ååæœåŠ¡ã€vLLMæ¡†æ¶',
      'FlashAttention': 'é•¿åºåˆ—è®­ç»ƒã€å¤§æ¨¡å‹è®­ç»ƒã€æ³¨æ„åŠ›ä¼˜åŒ–ã€å†…å­˜å—é™è®­ç»ƒã€é«˜æ€§èƒ½æ¨ç†',
      'Speculative Decoding': 'æ‰¹é‡ç”Ÿæˆã€é«˜ååæ¨ç†ã€å¹¶è¡Œç”Ÿæˆã€åŠ é€Ÿæ¨ç†ã€æœåŠ¡ä¼˜åŒ–',
      'TensorRT-LLM': 'ç”Ÿäº§æ¨ç†ã€NVIDIA GPUã€é«˜æ€§èƒ½æ¨ç†ã€é‡åŒ–æ¨ç†ã€å·¥ä¸šéƒ¨ç½²',
      'vLLM': 'LLMæœåŠ¡ã€APIæœåŠ¡ã€é«˜ååæ¨ç†ã€æ‰¹é‡æœåŠ¡ã€ç”Ÿäº§éƒ¨ç½²',
      'è§£ç ç­–ç•¥': 'æ–‡æœ¬ç”Ÿæˆã€å¯¹è¯ç³»ç»Ÿã€åˆ›æ„å†™ä½œã€ä»£ç ç”Ÿæˆã€ä»»åŠ¡ç‰¹å®šç”Ÿæˆ',
      'æç¤ºå·¥ç¨‹': 'Few-shotå­¦ä¹ ã€ä»»åŠ¡é€‚é…ã€æ€§èƒ½ä¼˜åŒ–ã€æ¨¡å‹å¼•å¯¼ã€åº”ç”¨å¼€å‘',
      'æµå¼ç”Ÿæˆ': 'èŠå¤©åº”ç”¨ã€å®æ—¶äº¤äº’ã€ç”¨æˆ·ä½“éªŒä¼˜åŒ–ã€é•¿æ–‡æœ¬ç”Ÿæˆã€äº¤äº’å¼åº”ç”¨',
      'RAGç³»ç»Ÿ': 'é—®ç­”ç³»ç»Ÿã€æ–‡æ¡£ç”Ÿæˆã€çŸ¥è¯†å¢å¼ºã€ä¿¡æ¯æ£€ç´¢ã€ä¼ä¸šåº”ç”¨',
      'AIæ™ºèƒ½ä½“': 'è‡ªåŠ¨åŒ–ä»»åŠ¡ã€æ™ºèƒ½åŠ©æ‰‹ã€å·¥å…·è°ƒç”¨ã€å¤æ‚ä»»åŠ¡æ‰§è¡Œã€å¤šæ­¥éª¤æ¨ç†',
      'LangChainæ¡†æ¶': 'LLMåº”ç”¨å¼€å‘ã€å·¥å…·é›†æˆã€é“¾å¼è°ƒç”¨ã€åº”ç”¨æ¡†æ¶ã€å¿«é€Ÿå¼€å‘',
    };
    return scenes[name] || '';
  }
  
  return '';
};

// å¤„ç†æ¯ä¸ªæ–‡ä»¶
fixes.forEach(({ file, addCoreConcept, addCoreFeatures, addKeyTech, addAppScene }) => {
  const filePath = path.join(knowledgeDir, file);
  
  if (!fs.existsSync(filePath)) {
    console.log(`âŒ æ–‡ä»¶ä¸å­˜åœ¨: ${file}`);
    return;
  }
  
  try {
    const content = fs.readFileSync(filePath, 'utf-8');
    const doc = JSON.parse(content);
    
    let hasChanges = false;
    let sections = doc.content || [];
    
    // æ£€æŸ¥ç°æœ‰æ¨¡å—
    const hasCoreConcept = sections.some(s => 
      s.title && s.title.includes('æ ¸å¿ƒæ¦‚å¿µ')
    );
    const hasCoreFeatures = sections.some(s => 
      s.title && (s.title.includes('æ ¸å¿ƒç‰¹ç‚¹') || s.title.includes('ğŸŒŸ æ ¸å¿ƒç‰¹ç‚¹'))
    );
    const hasKeyTech = sections.some(s => 
      s.title && (s.title.includes('å…³é”®æŠ€æœ¯') || s.title.includes('âš™ï¸ å…³é”®æŠ€æœ¯'))
    );
    const hasAppScene = sections.some(s => 
      s.title && (s.title.includes('åº”ç”¨åœºæ™¯') || s.title.includes('ğŸš€ åº”ç”¨åœºæ™¯'))
    );
    
    // æ‰¾åˆ°æ¶æ„å›¾è§£çš„ä½ç½®ï¼ˆåœ¨å®ƒä¹‹å‰æ’å…¥å¿…éœ€æ¨¡å—ï¼‰
    let diagramIndex = sections.findIndex(s => 
      s.title && s.title.includes('æ¶æ„å›¾è§£')
    );
    
    // æ„å»ºæ–°çš„sectionsæ•°ç»„
    const newSections = [];
    
    // 1. æ·»åŠ æ ¸å¿ƒæ¦‚å¿µ
    if (addCoreConcept && !hasCoreConcept) {
      const coreConcept = getContent(file, 'coreConcept');
      if (coreConcept) {
        newSections.push({
          type: "section",
          title: "ğŸ“– æ ¸å¿ƒæ¦‚å¿µ",
          content: [
            {
              type: "desc-box",
              content: [coreConcept]
            }
          ]
        });
        hasChanges = true;
      }
    } else if (hasCoreConcept) {
      // ä¿ç•™ç°æœ‰çš„æ ¸å¿ƒæ¦‚å¿µ
      const existing = sections.find(s => s.title && s.title.includes('æ ¸å¿ƒæ¦‚å¿µ'));
      if (existing) newSections.push(existing);
    }
    
    // 2. æ·»åŠ æ ¸å¿ƒç‰¹ç‚¹
    if (addCoreFeatures && !hasCoreFeatures) {
      const features = getContent(file, 'coreFeatures');
      if (features.length > 0) {
        newSections.push({
          type: "section",
          title: "ğŸŒŸ æ ¸å¿ƒç‰¹ç‚¹",
          content: [
            {
              type: "features",
              items: features
            }
          ]
        });
        hasChanges = true;
      }
    } else if (hasCoreFeatures) {
      const existing = sections.find(s => s.title && (s.title.includes('æ ¸å¿ƒç‰¹ç‚¹') || s.title.includes('ğŸŒŸ æ ¸å¿ƒç‰¹ç‚¹')));
      if (existing) newSections.push(existing);
    }
    
    // 3. æ·»åŠ å…³é”®æŠ€æœ¯
    if (addKeyTech && !hasKeyTech) {
      const keyTech = getContent(file, 'keyTech');
      if (keyTech) {
        newSections.push({
          type: "section",
          title: "âš™ï¸ å…³é”®æŠ€æœ¯",
          content: [
            {
              type: "tech-box",
              content: keyTech
            }
          ]
        });
        hasChanges = true;
      }
    } else if (hasKeyTech) {
      const existing = sections.find(s => s.title && (s.title.includes('å…³é”®æŠ€æœ¯') || s.title.includes('âš™ï¸ å…³é”®æŠ€æœ¯')));
      if (existing) newSections.push(existing);
    }
    
    // 4. æ·»åŠ åº”ç”¨åœºæ™¯
    if (addAppScene && !hasAppScene) {
      const appScene = getContent(file, 'appScene');
      if (appScene) {
        newSections.push({
          type: "section",
          title: "ğŸš€ åº”ç”¨åœºæ™¯",
          content: [
            {
              type: "app-box",
              content: appScene
            }
          ]
        });
        hasChanges = true;
      }
    } else if (hasAppScene) {
      const existing = sections.find(s => s.title && (s.title.includes('åº”ç”¨åœºæ™¯') || s.title.includes('ğŸš€ åº”ç”¨åœºæ™¯')));
      if (existing) newSections.push(existing);
    }
    
    // 5. æ·»åŠ å…¶ä»–ç°æœ‰sectionï¼ˆæ¶æ„å›¾è§£ã€æ•°å­¦åŸç†ã€ä»£ç ç¤ºä¾‹ç­‰ï¼‰
    sections.forEach(section => {
      if (section.title && 
          !section.title.includes('æ ¸å¿ƒæ¦‚å¿µ') && 
          !section.title.includes('æ ¸å¿ƒç‰¹ç‚¹') && 
          !section.title.includes('å…³é”®æŠ€æœ¯') && 
          !section.title.includes('åº”ç”¨åœºæ™¯')) {
        newSections.push(section);
      }
    });
    
    // ä¿å­˜æ–‡ä»¶
    if (hasChanges) {
      doc.content = newSections;
      const newContent = JSON.stringify(doc, null, 2);
      fs.writeFileSync(filePath, newContent, 'utf-8');
      console.log(`âœ… ${file}: å·²æ·»åŠ ç¼ºå¤±æ¨¡å—`);
    } else {
      console.log(`â­ï¸  ${file}: æ— éœ€ä¿®æ”¹`);
    }
    
  } catch (error) {
    console.error(`âŒ å¤„ç† ${file} æ—¶å‡ºé”™:`, error.message);
  }
});

console.log('\nâœ… æ‰¹é‡ä¿®å¤å®Œæˆï¼');
