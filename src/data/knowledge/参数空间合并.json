{
  "title": "å‚æ•°ç©ºé—´åˆå¹¶ï¼ˆParameter Space Mergeï¼‰",
  "subtitle": "ç›´æ¥å¯¹æ¨¡å‹å‚æ•°è¿›è¡ŒåŠ æƒå¹³å‡æˆ–å…¶ä»–ç®—æœ¯æ“ä½œï¼Œæ˜¯æœ€åŸºç¡€çš„å‚æ•°çº§åˆå¹¶æ–¹æ³•ã€‚",
  "content": [
    {
      "type": "section",
      "title": "ğŸ“– æ ¸å¿ƒæ¦‚å¿µ",
      "content": [
        {
          "type": "desc-box",
          "content": [
            "å‚æ•°ç©ºé—´åˆå¹¶æ˜¯ç›´æ¥åœ¨å‚æ•°ç©ºé—´ä¸­å¯¹å¤šä¸ªæ¨¡å‹çš„å‚æ•°è¿›è¡Œç®—æœ¯æ“ä½œçš„æ–¹æ³•ã€‚è¿™ç§æ–¹æ³•ä¸ä¾èµ–äºä»»åŠ¡å‘é‡æˆ–åŠŸèƒ½é”šç‚¹ï¼Œè€Œæ˜¯ç›´æ¥å¯¹å‚æ•°è¿›è¡ŒåŠ æƒå¹³å‡ã€æœ€å¤§å€¼ã€æœ€å°å€¼ç­‰æ“ä½œã€‚å‚æ•°ç©ºé—´åˆå¹¶æ˜¯æœ€ç›´è§‚çš„åˆå¹¶æ–¹æ³•ï¼Œè®¡ç®—ç®€å•ä½†å¯èƒ½å—åˆ°å‚æ•°å¯¹é½é—®é¢˜çš„å½±å“ã€‚"
          ]
        }
      ]
    },
    {
      "type": "section",
      "title": "ğŸ“Š æ¶æ„å›¾è§£",
      "content": [
        {
          "type": "diagram-gallery",
          "images": [
            {
              "type": "svg-d3",
              "component": "GenericDiagram",
              "caption": "å‚æ•°ç©ºé—´æ“ä½œ",
              "width": 1000,
              "height": 800,
              "interactive": true,
              "props": {
                "type": "architecture",
                "title": "å‚æ•°ç©ºé—´æ“ä½œ"
              }
            },
            {
              "type": "svg-d3",
              "component": "GenericDiagram",
              "caption": "å‚æ•°å¯¹é½",
              "width": 1000,
              "height": 800,
              "interactive": true,
              "props": {
                "type": "flow",
                "title": "å‚æ•°å¯¹é½"
              }
            },
            {
              "type": "svg-d3",
              "component": "GenericDiagram",
              "caption": "åˆå¹¶ç­–ç•¥å¯¹æ¯”",
              "width": 1000,
              "height": 800,
              "interactive": true,
              "props": {
                "type": "comparison",
                "title": "åˆå¹¶ç­–ç•¥å¯¹æ¯”"
              }
            }
          ]
        }
      ]
    },
    {
      "type": "section",
      "title": "ğŸŒŸ æ ¸å¿ƒç‰¹ç‚¹",
      "content": [
        {
          "type": "features",
          "items": [
            "ç›´æ¥æ“ä½œï¼šç›´æ¥åœ¨å‚æ•°ç©ºé—´è¿›è¡Œæ“ä½œï¼Œæ— éœ€é¢å¤–è®¡ç®—",
            "è®¡ç®—ç®€å•ï¼šåªéœ€å¯¹å‚æ•°è¿›è¡Œç®—æœ¯è¿ç®—ï¼Œè®¡ç®—å¤æ‚åº¦ä½",
            "ç­–ç•¥å¤šæ ·ï¼šæ”¯æŒåŠ æƒå¹³å‡ã€æœ€å¤§å€¼ã€æœ€å°å€¼ç­‰å¤šç§ç­–ç•¥",
            "å‚æ•°å¯¹é½ï¼šéœ€è¦ç¡®ä¿å„æ¨¡å‹çš„å‚æ•°åç§°å’Œå½¢çŠ¶ä¸€è‡´",
            "çµæ´»æ€§é«˜ï¼šå¯ä»¥æ ¹æ®éœ€è¦é€‰æ‹©ä¸åŒçš„åˆå¹¶ç­–ç•¥",
            "é€‚ç”¨æ€§å¹¿ï¼šé€‚åˆå¤§å¤šæ•°æ¨¡å‹åˆå¹¶åœºæ™¯"
          ]
        }
      ]
    },
    {
      "type": "section",
      "title": "ğŸ“ æ•°å­¦åŸç†",
      "content": [
        {
          "type": "math-box",
          "title": "åŠ æƒå¹³å‡",
          "formulas": [
            {
              "display": "\\theta_{merged} = \\sum_{i=1}^{n} w_i \\theta_i"
            },
            {
              "text": "å¯¹å‚æ•°è¿›è¡ŒåŠ æƒå¹³å‡ï¼Œå…¶ä¸­ $w_i$ æ˜¯ç¬¬ $i$ ä¸ªæ¨¡å‹çš„æƒé‡ã€‚",
              "inline": "w_i"
            }
          ]
        },
        {
          "type": "math-box",
          "title": "æœ€å¤§å€¼åˆå¹¶",
          "formulas": [
            {
              "display": "\\theta_{merged} = \\max(\\theta_1, \\theta_2, \\ldots, \\theta_n)"
            },
            {
              "text": "é€å…ƒç´ å–æœ€å¤§å€¼ï¼Œé€‚åˆä¿ç•™å„æ¨¡å‹çš„æœ€å¤§èƒ½åŠ›ã€‚",
              "inline": "\\max"
            }
          ]
        },
        {
          "type": "math-box",
          "title": "æœ€å°å€¼åˆå¹¶",
          "formulas": [
            {
              "display": "\\theta_{merged} = \\min(\\theta_1, \\theta_2, \\ldots, \\theta_n)"
            },
            {
              "text": "é€å…ƒç´ å–æœ€å°å€¼ï¼Œé€‚åˆä¿å®ˆçš„åˆå¹¶ç­–ç•¥ã€‚",
              "inline": "\\min"
            }
          ]
        }
      ]
    },
    {
      "type": "section",
      "title": "ğŸ’» Python ä»£ç ç¤ºä¾‹",
      "content": [
        {
          "type": "code-box",
          "title": "å‚æ•°ç©ºé—´åŠ æƒå¹³å‡",
          "language": "python",
          "code": "import torch\nfrom transformers import AutoModelForCausalLM\n\n# åŠ è½½æ¨¡å‹\nmodel1 = AutoModelForCausalLM.from_pretrained(\"model1-path\")\nmodel2 = AutoModelForCausalLM.from_pretrained(\"model2-path\")\nmodel3 = AutoModelForCausalLM.from_pretrained(\"model3-path\")\n\n# å®šä¹‰æƒé‡\nweights = [0.4, 0.4, 0.2]\n\n# æ‰§è¡Œå‚æ•°ç©ºé—´åˆå¹¶\nmerged_state_dict = {}\nfor key in model1.state_dict():\n    # ç¡®ä¿å‚æ•°å½¢çŠ¶ä¸€è‡´\n    assert model1.state_dict()[key].shape == model2.state_dict()[key].shape\n    assert model1.state_dict()[key].shape == model3.state_dict()[key].shape\n    \n    # åŠ æƒå¹³å‡\n    merged_state_dict[key] = (\n        weights[0] * model1.state_dict()[key] +\n        weights[1] * model2.state_dict()[key] +\n        weights[2] * model3.state_dict()[key]\n    )\n\n# åˆ›å»ºåˆå¹¶åçš„æ¨¡å‹\nmerged_model = AutoModelForCausalLM.from_pretrained(\"model1-path\")\nmerged_model.load_state_dict(merged_state_dict)\nmerged_model.save_pretrained(\"./merged_model\")"
        },
        {
          "type": "code-box",
          "title": "æœ€å¤§å€¼åˆå¹¶ç­–ç•¥",
          "language": "python",
          "code": "import torch\nfrom transformers import AutoModelForCausalLM\n\n# åŠ è½½æ¨¡å‹\nmodel1 = AutoModelForCausalLM.from_pretrained(\"model1-path\")\nmodel2 = AutoModelForCausalLM.from_pretrained(\"model2-path\")\n\n# æ‰§è¡Œæœ€å¤§å€¼åˆå¹¶\nmerged_state_dict = {}\nfor key in model1.state_dict():\n    # é€å…ƒç´ å–æœ€å¤§å€¼\n    merged_state_dict[key] = torch.maximum(\n        model1.state_dict()[key],\n        model2.state_dict()[key]\n    )\n\n# åˆ›å»ºåˆå¹¶åçš„æ¨¡å‹\nmerged_model = AutoModelForCausalLM.from_pretrained(\"model1-path\")\nmerged_model.load_state_dict(merged_state_dict)\nmerged_model.save_pretrained(\"./merged_model\")"
        }
      ]
    },
    {
      "type": "section",
      "title": "âš™ï¸ å…³é”®æŠ€æœ¯",
      "content": [
        {
          "type": "tech-box",
          "content": "å‚æ•°ç©ºé—´ã€ç©ºé—´æ˜ å°„ã€å‚æ•°å¯¹é½ã€ç©ºé—´èåˆã€å‡ ä½•æ–¹æ³•"
        }
      ]
    },
    {
      "type": "section",
      "title": "ğŸš€ åº”ç”¨åœºæ™¯",
      "content": [
        {
          "type": "app-box",
          "content": "æ¨¡å‹å¹³å‡ï¼šå¯¹å¤šä¸ªæ£€æŸ¥ç‚¹æˆ–ä¸åŒéšæœºåˆå§‹åŒ–çš„æ¨¡å‹è¿›è¡Œå¹³å‡ã€‚çŸ¥è¯†èåˆï¼šåˆå¹¶åœ¨ä¸åŒæ•°æ®é›†ä¸Šè®­ç»ƒçš„æ¨¡å‹ã€‚å¿«é€Ÿå®éªŒï¼šå¿«é€Ÿå°è¯•ä¸åŒæ¨¡å‹çš„ç»„åˆã€‚å‚æ•°å¯¹é½ï¼šåœ¨å‚æ•°ç©ºé—´ç›´æ¥æ“ä½œçš„åœºæ™¯ã€‚"
        }
      ]
    },
    {
      "type": "section",
      "title": "âš ï¸ æ³¨æ„äº‹é¡¹",
      "content": [
        {
          "type": "features",
          "items": [
            "å‚æ•°å¯¹é½ï¼šå¿…é¡»ç¡®ä¿å„æ¨¡å‹çš„å‚æ•°åç§°å’Œå½¢çŠ¶å®Œå…¨ä¸€è‡´",
            "ç­–ç•¥é€‰æ‹©ï¼šä¸åŒç­–ç•¥é€‚ç”¨äºä¸åŒåœºæ™¯ï¼Œéœ€è¦å®éªŒéªŒè¯",
            "æ€§èƒ½æƒè¡¡ï¼šåˆå¹¶åçš„æ€§èƒ½å¯èƒ½ä¸ä¼šè¶…è¿‡æœ€ä½³æ¨¡å‹",
            "æ•°å€¼ç¨³å®šæ€§ï¼šéœ€è¦æ³¨æ„æ•°å€¼æº¢å‡ºå’Œä¸‹æº¢é—®é¢˜",
            "éªŒè¯æµ‹è¯•ï¼šåˆå¹¶åéœ€è¦è¿›è¡Œå……åˆ†çš„éªŒè¯æµ‹è¯•"
          ]
        }
      ]
    }
  ]
}