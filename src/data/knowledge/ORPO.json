{
  "title": "ORPOï¼šå•é˜¶æ®µå¥‡å¶æ¯”åå¥½ä¼˜åŒ–",
  "subtitle": "å°†ç›‘ç£å¾®è°ƒä¸åå¥½å¯¹é½åˆå¹¶ä¸ºä¸€æ¬¡è®­ç»ƒï¼Œé€šè¿‡ odds ratio æŸå¤±åœ¨å•æ¨¡å‹ä¸ŠåŒæ—¶å­¦ä¹ ä»»åŠ¡èƒ½åŠ›ä¸äººç±»åå¥½ã€‚",
  "content": [
    {
      "type": "section",
      "title": "ğŸ“Š å›¾è§£",
      "content": [
        {
          "type": "diagram-gallery",
          "images": [
            {
              "type": "svg-d3",
              "component": "GenericDiagram",
              "caption": "å•é˜¶æ®µæµç¨‹",
              "width": 1000,
              "height": 800,
              "interactive": true,
              "props": {
                "type": "flow",
                "title": "å•é˜¶æ®µæµç¨‹"
              }
            },
            {
              "type": "svg-d3",
              "component": "GenericDiagram",
              "caption": "è”åˆæŸå¤±æ›²çº¿",
              "width": 1000,
              "height": 800,
              "interactive": true,
              "props": {
                "type": "architecture",
                "title": "è”åˆæŸå¤±æ›²çº¿"
              }
            },
            {
              "type": "svg-d3",
              "component": "GenericDiagram",
              "caption": "ä¸ DPO / PPO å¯¹æ¯”",
              "width": 1000,
              "height": 800,
              "interactive": true,
              "props": {
                "type": "comparison",
                "title": "ä¸ DPO / PPO å¯¹æ¯”"
              }
            }
          ]
        }
      ]
    },
    {
      "type": "section",
      "title": "ğŸ“ æ•°å­¦åŸç†",
      "content": [
        {
          "type": "math-box",
          "title": "å¥‡å¶æ¯”æŸå¤±",
          "formulas": [
            {
              "text": "åå¥½æŸå¤±å®šä¹‰ä¸ºï¼š"
            },
            {
              "display": "\\mathcal{L}_{\\text{ORPO}} = -\\log \\sigma\\Big( \\eta + \\log \\frac{\\pi_\\theta(y^{+}|x)}{\\pi_\\theta(y^{-}|x)} \\Big)"
            },
            {
              "text": "å…¶ä¸­ $\\eta$ æ§åˆ¶ marginï¼Œä¿ƒä½¿æ¨¡å‹æé«˜ä¼˜è´¨å›ç­”æ¦‚ç‡ã€‚",
              "inline": "\\eta"
            }
          ]
        },
        {
          "type": "math-box",
          "title": "è”åˆç›®æ ‡",
          "formulas": [
            {
              "text": "æ€»æŸå¤±ï¼š"
            },
            {
              "display": "\\mathcal{L} = \\mathcal{L}_{\\text{SFT}} + \\lambda \\cdot \\mathcal{L}_{\\text{ORPO}}"
            },
            {
              "text": "$\\lambda$ æ§åˆ¶ç›‘ç£ä¸åå¥½ä¹‹é—´çš„æƒè¡¡ï¼Œä¸€èˆ¬å– 0.1~0.3ã€‚",
              "inline": "\\lambda"
            }
          ]
        }
      ]
    },
    {
      "type": "section",
      "title": "ğŸ’» Python ä»£ç ç¤ºä¾‹",
      "content": [
        {
          "type": "code-box",
          "title": "Axolotl ORPO ç‰‡æ®µ",
          "language": "yaml",
          "code": "base_model: meta-llama/Llama-3-8b-Instruct\nadapter: lora\nlora_r: 64\nlora_alpha: 128\nqlora: true\noptim: adamw_torch\nlr: 1e-5\norpo:\n  enabled: true\n  lambda: 0.2\n  margin: 2.0\n  mixing_ratio: 0.5   # SFT : Preference"
        }
      ]
    }
  ]
}