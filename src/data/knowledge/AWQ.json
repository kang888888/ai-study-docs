{
  "title": "AWQï¼šActivation-aware Weight Quantization",
  "subtitle": "é€šè¿‡æ¿€æ´»æ„ŸçŸ¥çš„ç¼©æ”¾å› å­ä¸ outlier å¤„ç†ï¼Œä½¿ 4bit é‡åŒ–åœ¨ä¿æŒé«˜ç²¾åº¦çš„åŒæ—¶æ— éœ€å¤æ‚çš„å†è®­ç»ƒã€‚",
  "content": [
    {
      "type": "section",
      "title": "ğŸ“Š å›¾è§£",
      "content": [
        {
          "type": "diagram-gallery",
          "images": [
            {
              "type": "svg-d3",
              "component": "GenericDiagram",
              "caption": "æµç¨‹",
              "width": 1000,
              "height": 800,
              "interactive": true,
              "props": {
                "type": "flow",
                "title": "æµç¨‹"
              }
            },
            {
              "type": "svg-d3",
              "component": "GenericDiagram",
              "caption": "ç¼©æ”¾å› å­",
              "width": 1000,
              "height": 800,
              "interactive": true,
              "props": {
                "type": "architecture",
                "title": "ç¼©æ”¾å› å­"
              }
            },
            {
              "type": "svg-d3",
              "component": "GenericDiagram",
              "caption": "ç²¾åº¦/é€Ÿåº¦å¯¹æ¯”",
              "width": 1000,
              "height": 800,
              "interactive": true,
              "props": {
                "type": "comparison",
                "title": "ç²¾åº¦/é€Ÿåº¦å¯¹æ¯”"
              }
            }
          ]
        }
      ]
    },
    {
      "type": "section",
      "title": "ğŸ“ æ•°å­¦åŸç†",
      "content": [
        {
          "type": "math-box",
          "title": "æ˜¾è‘—æ€§æŒ‡æ ‡",
          "formulas": [
            {
              "display": "s_i = \\| W_i A_i \\|_2"
            },
            {
              "text": "å…¶ä¸­ $A_i$ ä¸ºæ¿€æ´»æ ·æœ¬ï¼Œ$W_i$ ä¸ºå¯¹åº”åˆ—ã€‚",
              "inline": "A_i"
            }
          ]
        },
        {
          "type": "math-box",
          "title": "é‡ç¼©æ”¾é‡åŒ–",
          "formulas": [
            {
              "text": "é‡åŒ–å‰ï¼š$W' = D W$ï¼Œé‡åŒ–åï¼š$\\hat{W} = D^{-1} \\text{Quant}(W')$",
              "inline": "W' = D W"
            },
            {
              "text": "é€‰æ‹© $D$ ä½¿å¾—è¢«æ”¾å¤§çš„é€šé“åœ¨ 4bit ä¸‹ä»ä¿æŒç»†èŠ‚ã€‚",
              "inline": "D"
            }
          ]
        }
      ]
    },
    {
      "type": "section",
      "title": "ğŸ’» Python ä»£ç ç¤ºä¾‹",
      "content": [
        {
          "type": "code-box",
          "title": "ä½¿ç”¨ awq åº“é‡åŒ– LLaMA",
          "language": "python",
          "code": "from awq import AutoAWQForCausalLM\nfrom transformers import AutoTokenizer\n\nmodel_path = \"meta-llama/Llama-2-7b-hf\"\nquant_path = \"./llama2-awq\"\n\nmodel = AutoAWQForCausalLM.from_pretrained(\n    model_path,\n    low_bit=\"w4a16\",\n    fuse_layers=True\n)\n\ntokenizer = AutoTokenizer.from_pretrained(model_path, use_fast=False)\nmodel.quantize(tokenizer=tokenizer, calib_data=\"./calib.jsonl\")\nmodel.save_quantized(quant_path)"
        }
      ]
    }
  ]
}