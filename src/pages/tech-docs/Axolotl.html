<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Axolotl å…¨æµç¨‹å¾®è°ƒæ¡†æ¶ - æŠ€æœ¯è¯¦è§£</title>
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']],
                processEscapes: true,
                processEnvironments: true
            },
            options: {
                skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
            }
        };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    
    <!-- å…¬å…±æ ·å¼ -->
    <link rel="stylesheet" href="../common/styles.css">
</head>
<body>
    <div class="container">
        <h1>Axolotlï¼šæ¨¡å—åŒ–å¤§æ¨¡å‹å¾®è°ƒæµæ°´çº¿</h1>
        <p class="tagline">é€šè¿‡ YAML é…ç½®é©±åŠ¨çš„æ•°æ®å¤„ç†ã€LoRA/QLoRA/å…¨å‚æ•°è®­ç»ƒã€åˆ†å¸ƒå¼è°ƒåº¦ä¸æ—¥å¿—ç›‘æ§ï¼Œå®ç°â€œä¸€å¥—é…ç½®è·‘éæ‰€æœ‰æ¨¡å‹â€ã€‚</p>

        <div class="meta-grid">
            <div class="meta-card">
                <h3>ä¸»è¦ç‰¹æ€§</h3>
                <p>é«˜åº¦é…ç½®åŒ–ã€æ”¯æŒå¤šé˜¶æ®µè®­ç»ƒã€å†…ç½®æ•°æ®æ ¼å¼è½¬æ¢ã€æ— ç¼å¯¹æ¥ DeepSpeed/Accelerateã€‚</p>
            </div>
            <div class="meta-card">
                <h3>æ”¯æŒæ¨¡å¼</h3>
                <p>å…¨å‚ã€LoRAã€QLoRAã€Adapterã€P-Tuningã€DPOã€ORPOã€SFTã€RLHFã€‚</p>
            </div>
            <div class="meta-card">
                <h3>éƒ¨ç½²ç”Ÿæ€</h3>
                <p>Colabã€SageMakerã€AUTOMATIC1111ã€RunPodã€è‡ªæœ‰ GPU é›†ç¾¤ã€‚</p>
            </div>
            <div class="meta-card">
                <h3>é€‚ç”¨äººç¾¤</h3>
                <p>éœ€è¦æ‰¹é‡è·‘å®éªŒçš„å·¥ç¨‹å›¢é˜Ÿã€ç«èµ›é€‰æ‰‹ã€æ•™è‚²åŸ¹è®­ã€å¼€æºç¤¾åŒºç»´æŠ¤è€…ã€‚</p>
            </div>
        </div>

        <div class="section">
            <h2>ğŸ› ï¸ æŠ€æœ¯è¦ç‚¹</h2>
            <ul>
                <li><strong>é…ç½®å³ä»£ç ï¼š</strong>æ‰€æœ‰æ¨¡å‹/æ•°æ®/è®­ç»ƒ/æ¨ç†å‚æ•°é›†ä¸­åœ¨ YAMLï¼Œä¾¿äºç‰ˆæœ¬åŒ–ä¸å®¡è®¡ã€‚</li>
                <li><strong>æ•°æ®è‡ªåŠ¨ç®¡é“ï¼š</strong>æ”¯æŒ JSON/ShareGPT/Parquet ç­‰æ ¼å¼ï¼Œä¸€é”®ç”Ÿæˆå¯¹è¯æ¨¡æ¿ã€‚</li>
                <li><strong>å¤šæ¨¡å¼è®­ç»ƒï¼š</strong>åŒä¸€é…ç½®å¯é€šè¿‡ flag åˆ‡æ¢ LoRAã€QLoRAã€å…¨å‚æˆ–åå¥½ä¼˜åŒ–ã€‚</li>
                <li><strong>åˆ†å¸ƒå¼åç«¯ï¼š</strong>å†…ç½® DeepSpeed ZeRO-3ã€FSDPã€Petalsã€LoRA åˆå¹¶ä¸å¯¼å‡ºã€‚</li>
            </ul>
        </div>

        <div class="section">
            <h2>ğŸ“Š å›¾è§£</h2>
            <div class="diagram-gallery">
                <div class="diagram-item">
                    <img src="./assets/Axolotlæµç¨‹.png" alt="Axolotl å·¥ä½œæµ" onclick="openImageModal(this)" onerror="this.parentElement.style.display='none'">
                    <div class="caption">å·¥ä½œæµ</div>
                </div>
                <div class="diagram-item">
                    <img src="./assets/Axolotlé…ç½®.png" alt="é…ç½®ç»“æ„" onclick="openImageModal(this)" onerror="this.parentElement.style.display='none'">
                    <div class="caption">é…ç½®ç»“æ„</div>
                </div>
                <div class="diagram-item">
                    <img src="./assets/Axolotlåˆ†å¸ƒå¼.png" alt="åˆ†å¸ƒå¼æ‹“æ‰‘" onclick="openImageModal(this)" onerror="this.parentElement.style.display='none'">
                    <div class="caption">åˆ†å¸ƒå¼æ‹“æ‰‘</div>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>ğŸ“ æ•°å­¦/èµ„æºä¼°ç®—</h2>
            <div class="math-box">
                <h3>æ˜¾å­˜é¢„ç®—</h3>
                <div class="math-formula">
                    <p>Axolotl çš„å†…ç½®ä¼°ç®—å™¨æŒ‰å¦‚ä¸‹è¿‘ä¼¼ï¼š</p>
                    <p>$$\text{VRAM} \approx \frac{n_{\text{params}} \times bytes_{\text{precision}}}{\text{tensor_parallel}} + \text{optimizer
overhead} + \text{activation
overhead}$$</p>
                    <p>ç»“åˆ ZeRO-3 å¯å°†ä¼˜åŒ–å™¨çŠ¶æ€æŒ‰èŠ‚ç‚¹å¹³å‡ï¼Œæ˜¾è‘—é™ä½å³°å€¼æ˜¾å­˜ã€‚</p>
                </div>
            </div>
            <div class="math-box">
                <h3>ååä¸æ¢¯åº¦åŒæ­¥</h3>
                <div class="math-formula">
                    <p>ä½¿ç”¨ FSDP/ZeRO æ—¶çš„é€šä¿¡å¼€é”€ï¼š</p>
                    <p>$$T = T_{\text{compute}} + \frac{P-1}{P} \cdot T_{\text{allreduce}}$$</p>
                    <p>Axolotl é€šè¿‡æ¢¯åº¦ç´¯ç§¯ä¸ overlap reduce ä¼˜åŒ–ä¸Šè¿°é¡¹ã€‚</p>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>ğŸ’» ä»£ç ç¤ºä¾‹</h2>
            <div class="code-box">
                <h3>æœ€å°åŒ– YAML é…ç½®</h3>
                <pre><code class="language-yaml">base_model: meta-llama/Llama-3-8b-Instruct
load_in_4bit: true
adapter: lora
lora_r: 64
lora_alpha: 128
dataset_mixer:
  - ./data/sharegpt.json: 1.0
val_set_size: 0.01
sequence_len: 4096
micro_batch_size: 2
gradient_accumulation_steps: 8
learning_rate: 2e-4
epochs: 3
device_map: auto
</code></pre>
                <pre><code class="language-bash">axolotl run configs/llama3_orpo.yml --wandb</code></pre>
            </div>
        </div>
    </div>

    <div id="imageModal" class="image-modal" onclick="closeImageModal()">
        <span class="image-modal-close" onclick="event.stopPropagation(); closeImageModal();">&times;</span>
        <img id="modalImage" class="image-modal-content" src="" alt="">
        <div id="modalCaption" class="image-modal-caption"></div>
    </div>

    <script>
        function openImageModal(img) {
            const modal = document.getElementById('imageModal');
            const modalImg = document.getElementById('modalImage');
            const modalCaption = document.getElementById('modalCaption');
            modal.classList.add('active');
            modalImg.src = img.src;
            modalCaption.textContent = img.alt || '';
        }
        function closeImageModal() {
            document.getElementById('imageModal').classList.remove('active');
        }
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') closeImageModal();
        });
    </script>
    <!-- å…¬å…±è„šæœ¬ -->
    <script src="../common/tech-document.js"></script>
</body>
</html>
