<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>LangChainæ¡†æ¶</title>
    <script>
        window.MathJax = { tex: { inlineMath: [["$", "$"], ["\\(", "\\)"]], displayMath: [["$$", "$$"], ["\\[", "\\]"]] } };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    
    <!-- å…¬å…±æ ·å¼ -->
    <link rel="stylesheet" href="../common/styles.css">
</head>
<body>
<div class="container">
    <h1>LangChainæ¡†æ¶</h1>
    <p class="tagline">LangChain æ¡†æ¶çš„æ ¸å¿ƒæ¦‚å¿µã€è¿›é˜¶ç‰¹æ€§ã€RAG/æ™ºèƒ½ä½“é›†æˆä¸å®è·µæ¡ˆä¾‹ã€‚</p>

    <div class="meta-grid">
        <div class="meta-card"><h3>æ ¸å¿ƒç»„ä»¶</h3><p>Models, Prompts, Chains, Agents, Memory, Vector Stores</p></div>
        <div class="meta-card"><h3>åº”ç”¨æ¨¡å¼</h3><p>RAG æ£€ç´¢å¢å¼ºã€æ™ºèƒ½ä½“ã€å¯¹è¯ç³»ç»Ÿã€ä»»åŠ¡è‡ªåŠ¨åŒ–</p></div>
        <div class="meta-card"><h3>é«˜çº§ç‰¹æ€§</h3><p>æµå¼è¾“å‡ºã€å›è°ƒã€å¤æ‚é“¾ã€æ¡ä»¶/å¹¶è¡Œæ‰§è¡Œã€ç¼“å­˜</p></div>
        <div class="meta-card"><h3>å®è·µæ¡ˆä¾‹</h3><p>é—®ç­”é“¾ã€RAG QAã€å¯¹è¯ç³»ç»Ÿã€Agent æ‰§è¡Œ</p></div>
    </div>

    <div class="section">
        <h2>ğŸš€ å¿«é€Ÿå¼€å§‹</h2>
        <div class="code-box">
            <h3>å®‰è£…ä¸æœ€å°ç¤ºä¾‹</h3>
            <pre><code class="language-python">from langchain_openai import ChatOpenAI
from langchain.prompts import PromptTemplate

llm = ChatOpenAI(model="gpt-3.5-turbo", temperature=0.7)
prompt = PromptTemplate(
    input_variables=["topic"],
    template="å†™ä¸€æ®µå…³äº{topic}çš„ä»‹ç»"
)
chain = prompt | llm
print(chain.invoke({"topic": "LangChain"}).content)</code></pre>
        </div>
    </div>

    <div class="section">
        <h2>ğŸ§± æ ¸å¿ƒç»„ä»¶</h2>
        <h3>Modelsï¼ˆæ¨¡å‹ï¼‰</h3>
        <ul>
            <li>æ”¯æŒ OpenAIã€Anthropicã€HuggingFace ç­‰ä¸»æµ LLM</li>
            <li>åµŒå…¥æ¨¡å‹ï¼ˆOpenAIEmbeddingsã€HuggingFaceEmbeddingsï¼‰</li>
            <li>å¤šæ¨¡å‹è·¯ç”±ï¼Œæ ¹æ®ä»»åŠ¡é€‰æ‹©ä¸åŒæ¨¡å‹</li>
        </ul>
        <div class="code-box"><pre><code class="language-python">from langchain_openai import ChatOpenAI, OpenAIEmbeddings
llm = ChatOpenAI(model_name="gpt-4")
embeddings = OpenAIEmbeddings()</code></pre></div>

        <h3>Promptsï¼ˆæç¤ºï¼‰</h3>
        <ul>
            <li>PromptTemplateã€ChatPromptTemplateã€Few-shot æç¤º</li>
            <li>ç»“æ„åŒ–è¾“å‡ºè§£æï¼Œç¡®ä¿æ ¼å¼ç¨³å®š</li>
        </ul>

        <h3>Chainsï¼ˆé“¾ï¼‰</h3>
        <ul>
            <li>LLMChainã€Simple/SequentialChain</li>
            <li>RouterChain / ConditionalChain åšæ¡ä»¶è·¯ç”±</li>
            <li>ParallelChain å¹¶è¡Œæ‰§è¡Œå¤šé“¾</li>
        </ul>

        <h3>Agentsï¼ˆæ™ºèƒ½ä½“ï¼‰</h3>
        <ul>
            <li>Zero-shot ReActã€ReAct Docstoreã€è‡ªæˆ‘æé—®ç­‰ä»£ç†ç±»å‹</li>
            <li>æ”¯æŒå¤šå·¥å…·è°ƒç”¨ã€è§„åˆ’ã€å¤šè½®æ¨ç†</li>
        </ul>

        <div class="code-box"><pre><code class="language-python">from langchain.agents import initialize_agent, Tool

tools = [Tool(name="Search", func=search_web, description="ç½‘ç»œæœç´¢")]
agent = initialize_agent(tools, llm, agent="zero-shot-react-description")
response = agent.run("å¸®æˆ‘æŸ¥ä¸€ä¸‹ä»Šå¤©çš„AIæ–°é—»")</code></pre></div>

        <h3>Memoryï¼ˆè®°å¿†ï¼‰</h3>
        <ul>
            <li>ConversationBufferMemoryï¼šä¿å­˜å®Œæ•´ä¸Šä¸‹æ–‡</li>
            <li>ConversationSummaryMemoryï¼šç”Ÿæˆæ‘˜è¦è®°å¿†</li>
            <li>VectorStoreRetrieverMemoryï¼šæ£€ç´¢å¼è®°å¿†</li>
        </ul>

        <h3>Vector Storesï¼ˆå‘é‡å­˜å‚¨ï¼‰</h3>
        <ul>
            <li>å†…ç½® Chromaã€FAISSã€Milvusã€Qdrant ç­‰é€‚é…å™¨</li>
            <li>`vectorstore.as_retriever()` æ— ç¼æ¥å…¥é“¾è·¯</li>
        </ul>
    </div>

    <div class="section">
        <h2>âš™ï¸ LangChain + RAG</h2>
        <ol>
            <li>æ–‡æ¡£åŠ è½½ï¼š`TextLoader`, `PDFLoader`</li>
            <li>æ–‡æœ¬åˆ‡åˆ†ï¼š`RecursiveCharacterTextSplitter`</li>
            <li>å‘é‡åŒ–ï¼š`OpenAIEmbeddings`, `HuggingFaceEmbeddings`</li>
            <li>å‘é‡å­˜å‚¨ï¼š`Chroma`, `FAISS` ç­‰</li>
            <li>æ£€ç´¢é“¾ï¼š`RetrievalQA`, `ConversationalRetrievalChain`</li>
        </ol>
        <div class="code-box">
            <pre><code class="language-python">from langchain.document_loaders import TextLoader
from langchain.text_splitter import RecursiveCharacterTextSplitter
from langchain.vectorstores import Chroma
from langchain.chains import RetrievalQA

loader = TextLoader("docs.txt")
chunks = RecursiveCharacterTextSplitter(chunk_size=800, chunk_overlap=200).split_documents(loader.load())
vectorstore = Chroma.from_documents(chunks, embeddings)
qa_chain = RetrievalQA.from_chain_type(llm=llm, chain_type="stuff", retriever=vectorstore.as_retriever())
answer = qa_chain.run("æ–‡æ¡£çš„æ ¸å¿ƒè§‚ç‚¹æ˜¯ä»€ä¹ˆï¼Ÿ")</code></pre>
        </div>
        <ul>
            <li>ä¼˜åŒ– chunk ä¸ overlap</li>
            <li>å¼•å…¥å¤šå‘é‡æ£€ç´¢ã€Rerankã€åå¤„ç†</li>
            <li>Prompt ä¸­åŠ å…¥å¼•ç”¨ä¸æ ¼å¼è¦æ±‚</li>
        </ul>
    </div>

    <div class="section">
        <h2>ğŸ¤– LangChain + æ™ºèƒ½ä½“</h2>
        <ul>
            <li>Zero-shot ReActã€ReAct Docstoreã€è‡ªæˆ‘æé—®ã€Plan-and-Execute</li>
            <li>å·¥å…·è®¾è®¡ï¼š`Tool`/`StructuredTool`ï¼Œå®šä¹‰æ¸…æ™°è¾“å…¥è¾“å‡º</li>
            <li>ç»“åˆ Memory ä¸å‘é‡è®°å¿†å®ç°æ›´å¼ºä¸Šä¸‹æ–‡</li>
        </ul>
        <div class="code-box"><pre><code class="language-python">from langchain.tools import StructuredTool
from pydantic import BaseModel

class CalculatorInput(BaseModel):
    expression: str

calc_tool = StructuredTool.from_function(
    func=calculate,
    name="Calculator",
    description="æ‰§è¡Œæ•°å­¦è®¡ç®—",
    args_schema=CalculatorInput
)</code></pre></div>
        <p>æœ€ä½³å®è·µï¼šæ˜ç¡®å·¥å…·èŒè´£ã€åœ¨ Prompt ä¸­çº¦æŸæ­¥éª¤ã€é€šè¿‡å›è°ƒå’Œæ—¥å¿—ç›‘æ§ä»£ç†è¡Œä¸ºã€‚</p>
    </div>

    <div class="section">
        <h2>âœ¨ é«˜çº§ç‰¹æ€§</h2>
        <table>
            <thead>
                <tr><th>ç‰¹æ€§</th><th>åœºæ™¯</th></tr>
            </thead>
            <tbody>
                <tr><td>æµå¼è¾“å‡º</td><td>å®æ—¶å±•ç¤ºç”Ÿæˆå†…å®¹</td></tr>
                <tr><td>å›è°ƒç³»ç»Ÿ</td><td>æ—¥å¿—ã€ç›‘æ§ã€è°ƒè¯•</td></tr>
                <tr><td>å¤æ‚é“¾</td><td>æ¡ä»¶/å¾ªç¯/å¤šåˆ†æ”¯æµç¨‹</td></tr>
                <tr><td>å¹¶è¡Œæ‰§è¡Œ</td><td>èšåˆå¤šä¸ªæ¨¡å‹æˆ–å·¥å…·ç»“æœ</td></tr>
                <tr><td>ç¼“å­˜</td><td>é™ä½é‡å¤è°ƒç”¨æˆæœ¬</td></tr>
            </tbody>
        </table>
        <div class="code-box"><pre><code class="language-python">from langchain.callbacks.streaming_stdout import StreamingStdOutCallbackHandler
llm = ChatOpenAI(streaming=True, callbacks=[StreamingStdOutCallbackHandler()])</code></pre></div>
    </div>

    <div class="section">
        <h2>ğŸ§ª å®è·µæ¡ˆä¾‹</h2>
        <h3>é—®ç­”é“¾</h3>
        <div class="code-box"><pre><code class="language-python">from langchain.chains import LLMChain
from langchain.prompts import PromptTemplate

prompt = PromptTemplate.from_template("é—®é¢˜ï¼š{question}\nå›ç­”ï¼š")
qa_chain = LLMChain(llm=llm, prompt=prompt)
qa_chain.run("ä»€ä¹ˆæ˜¯LangChainï¼Ÿ")</code></pre></div>

        <h3>RAG é—®ç­”</h3>
        <div class="code-box"><pre><code class="language-python">qa_chain = RetrievalQA.from_chain_type(
    llm=llm,
    chain_type="stuff",
    retriever=vectorstore.as_retriever()
)
qa_chain.run("æ–‡æ¡£ä¸­æåˆ°äº†å“ªäº›å…³é”®æŠ€æœ¯ï¼Ÿ")</code></pre></div>

        <h3>å¯¹è¯ç³»ç»Ÿ</h3>
        <div class="code-box"><pre><code class="language-python">from langchain.chains import ConversationChain
from langchain.memory import ConversationBufferMemory

conversation = ConversationChain(llm=llm, memory=ConversationBufferMemory())
conversation.predict(input="ä½ å¥½")
conversation.predict(input="ä»‹ç»ä¸€ä¸‹ä½ è‡ªå·±")</code></pre></div>
    </div>

    <div class="section">
        <h2>âœ… æœ€ä½³å®è·µ</h2>
        <ul>
            <li>æ¨¡å—åŒ–è®¾è®¡ï¼šç»„ä»¶æ¾è€¦åˆã€å¯æ›¿æ¢</li>
            <li>Prompt ç‰ˆæœ¬ç®¡ç†ï¼šè®°å½•å˜æ›´ï¼Œä¾¿äºå›æº¯</li>
            <li>é”™è¯¯å¤„ç†ï¼šè‡ªå®šä¹‰è§£æå™¨ã€å¼‚å¸¸æ•è·</li>
            <li>ç›‘æ§ä¸æ—¥å¿—ï¼šç»“åˆå›è°ƒã€é“¾è·¯è·Ÿè¸ª</li>
            <li>æ€§èƒ½ä¼˜åŒ–ï¼šè£å‰ªä¸Šä¸‹æ–‡ã€ç¼“å­˜ç»“æœã€æ‰¹å¤„ç†è°ƒç”¨</li>
            <li>å®‰å…¨åˆè§„ï¼šè¿‡æ»¤è¾“å…¥è¾“å‡ºï¼Œè®°å½•å…³é”®æ“ä½œ</li>
        </ul>
    </div>

    <div class="section">
        <h2>ğŸ”— ç›¸å…³èµ„æº</h2>
        <ul>
            <li><a href="../å‘é‡æ•°æ®åº“/å‘é‡æ•°æ®åº“.md">å‘é‡æ•°æ®åº“</a> - å‘é‡æ£€ç´¢åŸºç¡€</li>
            <li><a href="../RAGç³»ç»Ÿ/RAGç³»ç»Ÿ.md">RAGç³»ç»Ÿ</a> - æ£€ç´¢å¢å¼ºç”Ÿæˆ</li>
            <li><a href="../AIæ™ºèƒ½ä½“/AIæ™ºèƒ½ä½“.md">AIæ™ºèƒ½ä½“</a> - æ™ºèƒ½ä½“æŠ€æœ¯</li>
            <li><a href="https://python.langchain.com/" target="_blank">LangChain å®˜æ–¹æ–‡æ¡£</a></li>
        </ul>
    </div>
</div>
    <!-- å…¬å…±è„šæœ¬ -->
    <script src="../common/tech-document.js"></script>
</body>
</html>
