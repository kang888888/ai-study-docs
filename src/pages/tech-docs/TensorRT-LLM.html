<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TensorRT-LLM æ¨ç†ä¼˜åŒ–</title>
    <script>
        window.MathJax = { tex: { inlineMath: [['$', '$'], ['\\(', '\\)']], displayMath: [['$$', '$$'], ['\\[', '\\]']] }, options: { skipHtmlTags: ['script','noscript','style','textarea','pre','code'] } };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    
    <!-- å…¬å…±æ ·å¼ -->
    <link rel="stylesheet" href="../common/styles.css">
</head>
<body>
    <div class="container">
        <h1>TensorRT-LLMï¼šGPU æ¨ç†æè‡´ä¼˜åŒ–</h1>
        <p class="tagline">åŸºäº TensorRT çš„æ·±åº¦å›¾ä¼˜åŒ–ã€ç®—å­èåˆä¸å¹¶è¡Œè°ƒåº¦ï¼Œé…åˆ KV Cache/é‡åŒ–å®ç°ä¼ä¸šçº§ååã€‚</p>

        <div class="meta-grid">
            <div class="meta-card"><h3>ç‰¹ç‚¹</h3><p>å›¾ä¼˜åŒ–ã€Kernel Auto-Tuningã€FP8/INT8/FP16 æ··åˆç²¾åº¦ã€‚</p></div>
            <div class="meta-card"><h3>ç»„ä»¶</h3><p>Builderã€Runtimeã€Execution Contextã€LLM Pluginï¼ˆPagedAttentionã€GQA ç­‰ï¼‰ã€‚</p></div>
            <div class="meta-card"><h3>æ”¯æŒ</h3><p>å¤š GPU å¹¶è¡Œã€Pipeline + Tensor Parallelã€CUDA Graphã€NVLinkã€‚</p></div>
            <div class="meta-card"><h3>éƒ¨ç½²</h3><p>trtllm-build â†’ trtllm-runner â†’ Triton/TAO/NeMo Inferenceã€‚</p></div>
        </div>

        <div class="section">
            <h2>âš™ï¸ æŠ€æœ¯è¦ç‚¹</h2>
            <ul>
                <li><strong>å›¾ä¼˜åŒ–ï¼š</strong>å°† Attentionã€LayerNormã€GEMM èåˆï¼Œé™ä½ DRAM è®¿é—®ã€‚</li>
                <li><strong>å¹¶è¡Œç­–ç•¥ï¼š</strong>è‡ªåŠ¨é€‰æ‹© Tensor/Context Parallel ä¸å¾®æ‰¹å¤§å°ã€‚</li>
                <li><strong>é‡åŒ–èåˆï¼š</strong>æ”¯æŒ SQã€AWQã€FP8 GEMM ç­‰ï¼Œä¸ builder ç´§å¯†ç»“åˆã€‚</li>
                <li><strong>è°ƒåº¦å™¨ï¼š</strong>é¢å‘å¤šè¯·æ±‚çš„ Multi-stream + CUDA Graphï¼Œä¸€æ¬¡ capture å¤šæ¬¡ replayã€‚</li>
            </ul>
        </div>

        <div class="section">
            <h2>ğŸ“Š å›¾è§£</h2>
            <div class="diagram-gallery">
                <div class="diagram-item"><img src="./assets/TensorRTLLMæ¶æ„.png" alt="æ¶æ„" onclick="openImageModal(this)" onerror="this.parentElement.style.display='none'"><div class="caption">æ¶æ„</div></div>
                <div class="diagram-item"><img src="./assets/TensorRTLLMæµç¨‹.png" alt="æ„å»ºæµç¨‹" onclick="openImageModal(this)" onerror="this.parentElement.style.display='none'"><div class="caption">æ„å»ºæµç¨‹</div></div>
                <div class="diagram-item"><img src="./assets/TensorRTLLMæ€§èƒ½.png" alt="æ€§èƒ½æ›²çº¿" onclick="openImageModal(this)" onerror="this.parentElement.style.display='none'"><div class="caption">æ€§èƒ½æ›²çº¿</div></div>
            </div>
        </div>

        <div class="section">
            <h2>ğŸ“ æ•°å­¦/æ€§èƒ½</h2>
            <div class="math-box">
                <h3>ç®—å­èåˆæ”¶ç›Š</h3>
                <div class="math-formula">
                    <p>$$T_{fusion} \approx T_{gemm} + T_{ln} - \Delta_{mem}$$</p>
                    <p>$\Delta_{mem}$ è¡¨ç¤ºå‡å°‘çš„å†…å­˜è®¿é—®æ—¶é—´ï¼Œæ˜¯ TRT ä¼˜åŠ¿æ‰€åœ¨ã€‚</p>
                </div>
            </div>
            <div class="math-box">
                <h3>ååä¼°ç®—</h3>
                <div class="math-formula">
                    <p>$$TPS = \frac{N_{streams} \times tokens_{per\_stream}}{latency_{per\_graph}}$$</p>
                    <p>CUDA Graph å¤ç”¨å¯æ˜¾è‘—é™ä½ $latency_{per\_graph}$ã€‚</p>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>ğŸ’» å‘½ä»¤ç¤ºä¾‹</h2>
            <div class="code-box">
                <h3>1. æ„å»º Engine</h3>
<pre><code class="language-bash">trtllm-build --model-dir ./Llama-3-8B \
  --quantization smoothquant --int8 \
  --workers 2 --max-input-len 4096 --max-output-len 1024 \
  --output-dir ./engine_llama3_int8
</code></pre>
                <h3>2. è¿è¡Œæ¨ç†</h3>
<pre><code class="language-bash">trtllm-runner --engine ./engine_llama3_int8 \
  --tokenizer meta-llama/Llama-3-8b-instruct \
  --input-text "ä»‹ç» TensorRT-LLM çš„ä¼˜åŠ¿"
</code></pre>
            </div>
        </div>
    </div>

    <div id="imageModal" class="image-modal" onclick="closeImageModal()">
        <span class="image-modal-close" onclick="event.stopPropagation(); closeImageModal();">&times;</span>
        <img id="modalImage" class="image-modal-content" src="" alt="">
        <div id="modalCaption" class="image-modal-caption"></div>
    </div>

    <script>
        function openImageModal(img){const modal=document.getElementById('imageModal');modal.classList.add('active');document.getElementById('modalImage').src=img.src;document.getElementById('modalCaption').textContent=img.alt||'';}
        function closeImageModal(){document.getElementById('imageModal').classList.remove('active');}
        document.addEventListener('keydown',e=>{if(e.key==='Escape')closeImageModal();});
    </script>
    <!-- å…¬å…±è„šæœ¬ -->
    <script src="../common/tech-document.js"></script>
</body>
</html>
