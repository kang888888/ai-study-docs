<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TRPO（Trust Region Policy Optimization）置信域策略优化</title>
    <script>
        window.MathJax = { tex: { inlineMath: [['$', '$'], ['\\(', '\\)']], displayMath: [['$$', '$$'], ['\\[', '\\]']] }, options: { skipHtmlTags: ['script','noscript','style','textarea','pre','code'] } };
    </script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    
    <!-- 公共样式 -->
    <link rel="stylesheet" href="../common/styles.css">
</head>
<body>
    <div class="container">
        <h1>TRPO：置信域策略优化</h1>
        <p class="tagline">使用置信域约束策略更新，为PPO的前身，有理论上的性能提升保证。</p>

        <div class="meta-grid">
            <div class="meta-card"><h3>核心思想</h3><p>使用置信域约束限制策略更新，保证性能提升。</p></div>
            <div class="meta-card"><h3>主要优势</h3><p>理论保证、稳定训练、精确控制。</p></div>
            <div class="meta-card"><h3>主要劣势</h3><p>实现复杂、计算成本高、已被PPO替代。</p></div>
            <div class="meta-card"><h3>技术要点</h3><p>置信域约束、KL散度约束、二阶优化。</p></div>
        </div>

        <div class="section">
            <h2>⚙️ 核心原理</h2>
            <ul>
                <li><strong>置信域约束</strong>：限制策略更新在置信域内</li>
                <li><strong>KL散度约束</strong>：显式约束新旧策略的KL散度</li>
                <li><strong>理论保证</strong>：有理论上的性能提升保证</li>
                <li><strong>二阶优化</strong>：使用共轭梯度法求解</li>
            </ul>
        </div>

        <div class="section">
            <h2>📐 数学原理</h2>
            <div class="math-box">
                <h3>优化目标</h3>
                <div class="math-formula">
                    <p>$$\maximize_{\theta} \mathbb{E}\left[\frac{\pi_\theta(a|s)}{\pi_{old}(a|s)} A^{\pi_{old}}(s,a)\right]$$</p>
                </div>
            </div>
            <div class="math-box">
                <h3>约束条件</h3>
                <div class="math-formula">
                    <p>$$\mathbb{E}[KL(\pi_{old}(\cdot|s) || \pi_\theta(\cdot|s))] \leq \delta$$</p>
                    <p>其中 $\delta$ 是置信域大小。</p>
                </div>
            </div>
        </div>

        <div class="section">
            <h2>🔄 TRPO vs PPO</h2>
            <table style="width:100%; border-collapse:collapse; margin-top:20px;">
                <tr style="border-bottom:1px solid rgba(255,255,255,0.1);">
                    <th style="padding:12px; text-align:left; color:#f9a8d4;">特性</th>
                    <th style="padding:12px; text-align:left; color:#f9a8d4;">TRPO</th>
                    <th style="padding:12px; text-align:left; color:#f9a8d4;">PPO</th>
                </tr>
                <tr style="border-bottom:1px solid rgba(255,255,255,0.05);">
                    <td style="padding:12px;">约束方式</td>
                    <td style="padding:12px;">显式KL约束</td>
                    <td style="padding:12px;">隐式裁剪约束</td>
                </tr>
                <tr style="border-bottom:1px solid rgba(255,255,255,0.05);">
                    <td style="padding:12px;">实现复杂度</td>
                    <td style="padding:12px;">高</td>
                    <td style="padding:12px;">低</td>
                </tr>
                <tr style="border-bottom:1px solid rgba(255,255,255,0.05);">
                    <td style="padding:12px;">计算成本</td>
                    <td style="padding:12px;">高</td>
                    <td style="padding:12px;">低</td>
                </tr>
                <tr style="border-bottom:1px solid rgba(255,255,255,0.05);">
                    <td style="padding:12px;">理论保证</td>
                    <td style="padding:12px;">有</td>
                    <td style="padding:12px;">无（但效果相当）</td>
                </tr>
                <tr>
                    <td style="padding:12px;">实际应用</td>
                    <td style="padding:12px;">较少</td>
                    <td style="padding:12px;">广泛</td>
                </tr>
            </table>
        </div>
    </div>
    <!-- 公共脚本 -->
    <script src="../common/tech-document.js"></script>
</body>
</html>

